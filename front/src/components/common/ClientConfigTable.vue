<template>
  <el-table :data="tableData" border>
    <el-table-column :label="clientType">
      <el-table-column prop="id" label="id" width="100">
      </el-table-column>
      <el-table-column label="msg">
        <template slot-scope="scope">
          <el-form style="padding : 0" label-position="left" label-width="100px">
            <el-form-item label="peak val(kA)">
              <el-input size="mini" v-model="scope.row.peak" :disabled="!scope.row.active" placeholder="请输入持续时间"></el-input>
            </el-form-item>
            <el-form-item label="duration(ms)">
              <el-input size="mini" v-model="scope.row.duration" :disabled="!scope.row.active" placeholder="请输入持续时间"></el-input>
            </el-form-item>
            <el-form-item label="polar   (+-)">
              <el-input size="mini" v-model="scope.row.polar" :disabled="!scope.row.active" placeholder="请输入电荷极性"></el-input>
            </el-form-item>
          </el-form>
        </template>
      </el-table-column>
      <el-table-column label="interval" width="100">
        <template slot-scope="scope">
          <el-input v-model="scope.row.interval" :disabled="!scope.row.active" placeholder="请输入间隔"></el-input>
        </template>
      </el-table-column>
      <el-table-column label="update" width="90">
        <template slot-scope="scope">
          <el-button size="mini" :disabled="!scope.row.active" @click="updateSendingMsg(scope.row.id, scope.row.peak + ' ' + scope.row.duration + ' ' + scope.row.polar , scope.row.interval)">update
          </el-button>
        </template>
      </el-table-column>
      <el-table-column label="switch" width="70">
        <template slot-scope="scope">
          <el-switch v-model="scope.row.active" @change="updateClientState(scope.row.id, scope.row.active)" on-color="#00A854" off-color="#F04134" on-value=true off-value=false on-text="on" off-text="off"></el-switch>
        </template>
      </el-table-column>
    </el-table-column>
  </el-table>
</template>

<script>
import ClientMsg from './ClientMsg.vue'
export default {
  name: 'client-config-table',
  data() {
    return {}
  },
  components : {ClientMsg},
  mounted() {},
  props: ['tableData', 'clientType'],
  methods: {
    updateSendingMsg(id, msg, interval) {
      //console.log('id: ' + id + ' msg: ' + msg + ' interval: ' + interval)
      this.$emit('updateSendingMsg', id, msg, interval)
    },
    updateClientState(id, active) {
      this.$emit('updateClientState', id, active)
      //this.$axios.post('http://127.0.0.1:8082/')
      //console.log('id: ' + id + 'active: ' + active)
    }
    ,
    getValue(Str) {
      return Str.split(" ")[0];
    }
  }
}
</script>
